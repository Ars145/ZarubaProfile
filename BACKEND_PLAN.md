# –ü–ª–∞–Ω –ë—ç–∫–µ–Ω–¥–∞ –¥–ª—è –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –ü—Ä–æ—Ñ–∏–ª—è –∏ –ö–ª–∞–Ω–æ–≤ ZARUBA

## üìã –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ
1. [–û–±–∑–æ—Ä](#–æ–±–∑–æ—Ä)
2. [–¢–µ–∫—É—â–µ–µ –°–æ—Å—Ç–æ—è–Ω–∏–µ –ü—Ä–æ–µ–∫—Ç–∞](#—Ç–µ–∫—É—â–µ–µ-—Å–æ—Å—Ç–æ—è–Ω–∏–µ-–ø—Ä–æ–µ–∫—Ç–∞)
3. [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –î–∞–Ω–Ω—ã—Ö](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–¥–∞–Ω–Ω—ã—Ö)
4. [API Endpoints](#api-endpoints)
5. [–ü–ª–∞–Ω –†–µ–∞–ª–∏–∑–∞—Ü–∏–∏](#–ø–ª–∞–Ω-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)
6. [–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –û—Å–Ω–æ–≤–Ω–æ–π –ü—Ä–æ–µ–∫—Ç](#–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è-–≤-–æ—Å–Ω–æ–≤–Ω–æ–π-–ø—Ä–æ–µ–∫—Ç)

---

## üéØ –û–±–∑–æ—Ä

### –¶–µ–ª—å
–°–æ–∑–¥–∞—Ç—å —á–∞—Å—Ç–∏—á–Ω—ã–π –±—ç–∫–µ–Ω–¥ –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –ø—Ä–æ—Ñ–∏–ª—è –∏–≥—Ä–æ–∫–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–ª–∞–Ω–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –ª–µ–≥–∫–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ –æ—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ–µ–∫—Ç ZARUBA.

### –ß—Ç–æ –ë—É–¥–µ—Ç –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- ‚úÖ REST API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è–º–∏ –∏–≥—Ä–æ–∫–æ–≤
- ‚úÖ REST API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–ª–∞–Ω–∞–º–∏
- ‚úÖ REST API –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞—è–≤–æ–∫ –≤ –∫–ª–∞–Ω—ã
- ‚úÖ PostgreSQL —Å—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ Drizzle ORM –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- ‚úÖ TypeScript —Ç–∏–ø—ã –¥–ª—è –≤—Å–µ—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π

### –ß—Ç–æ –ù–ï –ë—É–¥–µ—Ç –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- ‚ùå –ü–æ–ª–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (–ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –æ—Å–Ω–æ–≤–Ω—ã–º –ø—Ä–æ–µ–∫—Ç–æ–º)
- ‚ùå Steam API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (mock –¥–∞–Ω–Ω—ã–µ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏)
- ‚ùå Discord OAuth (—Ç–æ–ª—å–∫–æ —Ö—Ä–∞–Ω–µ–Ω–∏–µ Discord ID –∏ —Å—Å—ã–ª–æ–∫)
- ‚ùå Websocket –¥–ª—è real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π —Å—Ç–∞—Ç—É—Å–∞ –∏–≥—Ä–æ–∫–æ–≤
- ‚ùå –°–∏—Å—Ç–µ–º–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π (hardcoded –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ)

---

## üìä –¢–µ–∫—É—â–µ–µ –°–æ—Å—Ç–æ—è–Ω–∏–µ –ü—Ä–æ–µ–∫—Ç–∞

### –§—Ä–æ–Ω—Ç–µ–Ω–¥ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (–ì–æ—Ç–æ–≤–æ)
```
client/src/pages/profile.jsx - –û—Å–Ω–æ–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ—Ñ–∏–ª—è
‚îú‚îÄ‚îÄ –†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: Guest, Member, Owner
‚îú‚îÄ‚îÄ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∞–Ω–∞–º–∏ (Owner)
‚îú‚îÄ‚îÄ –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–æ—Å—Ç–∞–≤–∞ –∫–ª–∞–Ω–∞ (Member/Owner)
‚îú‚îÄ‚îÄ –ü–æ–∏—Å–∫ –∏ –∑–∞—è–≤–∫–∏ –≤ –∫–ª–∞–Ω—ã (Guest)
‚îî‚îÄ‚îÄ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è –∏ –∫–ª–∞–Ω–∞
```

### Mock –î–∞–Ω–Ω—ã–µ –Ω–∞ –§—Ä–æ–Ω—Ç–µ–Ω–¥–µ (–¢—Ä–µ–±—É—é—Ç API)

#### 1. **–ü—Ä–æ—Ñ–∏–ª—å –ò–≥—Ä–æ–∫–∞**
```javascript
{
  username: "TacticalViper",
  level: 52,
  xp: 68,
  avatarUrl: "https://api.dicebear.com/7.x/avataaars/svg?seed=TacticalViper",
  isVip: false,
  steamId: "STEAM_0:1:12345678",
  discordId: "TacticalViper#9999",
  status: "online" | "offline" | "in_game"
}
```

#### 2. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ò–≥—Ä–æ–∫–∞**
```javascript
{
  kills: 1245,
  deaths: 892,
  kd: 1.42,
  playtime: "342—á",
  games: 178,
  hours: "6–¥ 20—á",
  sl: "4–¥ 7—á",        // Squad Leader time
  driver: "2—á",        // Driver time
  pilot: "0",          // Pilot time
  cmd: "21—á",          // Commander time
  likes: 82,           // Teamwork points
  tk: 39,              // Team kills
  winrate: 49,         // Win percentage
  wins: 88,
  avgKills: 1,
  vehicleKills: 9,
  knifeKills: 0
}
```

#### 3. **–ö–ª–∞–Ω**
```javascript
{
  id: "alpha",
  name: "–û—Ç—Ä—è–¥ –ê–ª—å—Ñ–∞",
  tag: "ALPHA",
  members: 5,
  maxMembers: 50,
  level: 5,
  requirements: "100—á+, KD > 1.0",
  description: "–≠–ª–∏—Ç–Ω—ã–π –æ—Ç—Ä—è–¥ –¥–ª—è –æ–ø—ã—Ç–Ω—ã—Ö –∏–≥—Ä–æ–∫–æ–≤...",
  bannerUrl: "/path/to/banner.png",
  logoUrl: "/path/to/logo.png",
  discordLink: "https://discord.gg/clan-alpha",
  winrate: 68,
  ownerId: "uuid-owner"
}
```

#### 4. **–ß–ª–µ–Ω –ö–ª–∞–Ω–∞**
```javascript
{
  id: 1,
  userId: "user-uuid",
  clanId: "alpha",
  name: "TacticalViper",
  role: "–û—Ñ–∏—Ü–µ—Ä" | "–ë–æ–µ—Ü" | "–†–µ–∫—Ä—É—Ç",
  status: "–í –ò–ì–†–ï" | "–í –°–ï–¢–ò" | "–ù–ï –í –°–ï–¢–ò",
  joinedAt: "2024-01-15T10:00:00Z",
  stats: { /* player stats */ }
}
```

#### 5. **–ó–∞—è–≤–∫–∞ –≤ –ö–ª–∞–Ω**
```javascript
{
  id: 101,
  applicantId: "user-uuid",
  clanId: "alpha",
  name: "Rookie_One",
  message: "–•–æ—á—É –≤ –∫—Ä—É—Ç–æ–π –∫–ª–∞–Ω, –∏–≥—Ä–∞—é –∫–∞–∂–¥—ã–π –¥–µ–Ω—å!",
  createdAt: "2024-11-20T10:00:00Z",
  status: "pending" | "accepted" | "rejected",
  stats: { /* player stats */ }
}
```

---

## üóÑÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –î–∞–Ω–Ω—ã—Ö

### Database Schema (PostgreSQL + Drizzle)

```typescript
// shared/schema.ts

// 1. Players Table
export const players = pgTable("players", {
  id: varchar("id").primaryKey().default(sql`gen_random_uuid()`),
  username: text("username").notNull().unique(),
  steamId: text("steam_id").unique(),
  discordId: text("discord_id"),
  avatarUrl: text("avatar_url"),
  level: integer("level").default(1),
  xp: integer("xp").default(0),
  isVip: boolean("is_vip").default(false),
  status: text("status").default("offline"), // online, offline, in_game
  createdAt: timestamp("created_at").defaultNow(),
  updatedAt: timestamp("updated_at").defaultNow()
});

// 2. Player Stats Table
export const playerStats = pgTable("player_stats", {
  playerId: varchar("player_id").references(() => players.id).primaryKey(),
  kills: integer("kills").default(0),
  deaths: integer("deaths").default(0),
  wins: integer("wins").default(0),
  games: integer("games").default(0),
  playtimeMinutes: integer("playtime_minutes").default(0),
  squadLeaderMinutes: integer("squad_leader_minutes").default(0),
  driverMinutes: integer("driver_minutes").default(0),
  pilotMinutes: integer("pilot_minutes").default(0),
  commanderMinutes: integer("commander_minutes").default(0),
  likes: integer("likes").default(0),
  teamKills: integer("team_kills").default(0),
  vehicleKills: integer("vehicle_kills").default(0),
  knifeKills: integer("knife_kills").default(0)
});

// 3. Clans Table
export const clans = pgTable("clans", {
  id: varchar("id").primaryKey().default(sql`gen_random_uuid()`),
  name: text("name").notNull().unique(),
  tag: text("tag").notNull().unique(),
  ownerId: varchar("owner_id").references(() => players.id).notNull(),
  description: text("description"),
  requirements: text("requirements"),
  bannerUrl: text("banner_url"),
  logoUrl: text("logo_url"),
  discordLink: text("discord_link"),
  level: integer("level").default(1),
  maxMembers: integer("max_members").default(50),
  createdAt: timestamp("created_at").defaultNow(),
  updatedAt: timestamp("updated_at").defaultNow()
});

// 4. Clan Members Table
export const clanMembers = pgTable("clan_members", {
  id: varchar("id").primaryKey().default(sql`gen_random_uuid()`),
  clanId: varchar("clan_id").references(() => clans.id).notNull(),
  playerId: varchar("player_id").references(() => players.id).notNull(),
  role: text("role").default("–†–µ–∫—Ä—É—Ç"), // –û—Ñ–∏—Ü–µ—Ä, –ë–æ–µ—Ü, –†–µ–∫—Ä—É—Ç
  joinedAt: timestamp("joined_at").defaultNow()
});

// 5. Clan Applications Table
export const clanApplications = pgTable("clan_applications", {
  id: varchar("id").primaryKey().default(sql`gen_random_uuid()`),
  clanId: varchar("clan_id").references(() => clans.id).notNull(),
  playerId: varchar("player_id").references(() => players.id).notNull(),
  message: text("message").notNull(),
  status: text("status").default("pending"), // pending, accepted, rejected
  createdAt: timestamp("created_at").defaultNow(),
  reviewedAt: timestamp("reviewed_at"),
  reviewedBy: varchar("reviewed_by").references(() => players.id)
});
```

### TypeScript Types
```typescript
export type Player = typeof players.$inferSelect;
export type InsertPlayer = z.infer<typeof insertPlayerSchema>;

export type PlayerStats = typeof playerStats.$inferSelect;
export type InsertPlayerStats = z.infer<typeof insertPlayerStatsSchema>;

export type Clan = typeof clans.$inferSelect;
export type InsertClan = z.infer<typeof insertClanSchema>;

export type ClanMember = typeof clanMembers.$inferSelect;
export type InsertClanMember = z.infer<typeof insertClanMemberSchema>;

export type ClanApplication = typeof clanApplications.$inferSelect;
export type InsertClanApplication = z.infer<typeof insertClanApplicationSchema>;
```

---

## üîå API Endpoints

### Base URL
```
/api
```

### Authentication
–í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã (–∫—Ä–æ–º–µ public) —Ç—Ä–µ–±—É—é—Ç header:
```
Authorization: Bearer <token>
```
**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –±—É–¥–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ. –î–ª—è –¥–µ–º–æ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–∏–∫—Ç–∏–≤–Ω—ã–π middleware.

---

### üì± Players API

#### `GET /api/players/me`
–ü–æ–ª—É—á–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å —Ç–µ–∫—É—â–µ–≥–æ –∏–≥—Ä–æ–∫–∞

**Response:**
```json
{
  "player": {
    "id": "uuid",
    "username": "TacticalViper",
    "steamId": "STEAM_0:1:12345678",
    "discordId": "TacticalViper#9999",
    "avatarUrl": "https://...",
    "level": 52,
    "xp": 6800,
    "isVip": false,
    "status": "online"
  },
  "stats": {
    "kills": 1245,
    "deaths": 892,
    "kd": 1.42,
    "wins": 88,
    "games": 178,
    "winrate": 49.44,
    "playtime": "342—á",
    // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Å—Ç–∞—Ç—ã
  },
  "clan": {
    "id": "alpha",
    "name": "–û—Ç—Ä—è–¥ –ê–ª—å—Ñ–∞",
    "tag": "ALPHA",
    "role": "–û—Ñ–∏—Ü–µ—Ä"
  } | null
}
```

#### `PATCH /api/players/me`
–û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å –∏–≥—Ä–æ–∫–∞

**Request Body:**
```json
{
  "username": "NewUsername",
  "avatarUrl": "https://...",
  "discordId": "NewDiscord#1234"
}
```

**Response:**
```json
{
  "player": { /* updated player */ }
}
```

#### `GET /api/players/:id`
–ü–æ–ª—É—á–∏—Ç—å –ø—É–±–ª–∏—á–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å –∏–≥—Ä–æ–∫–∞

**Response:**
```json
{
  "player": { /* player info */ },
  "stats": { /* player stats */ },
  "clan": { /* clan info or null */ }
}
```

---

### üõ°Ô∏è Clans API

#### `GET /api/clans`
–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∫–ª–∞–Ω–æ–≤

**Query Params:**
- `search` - –ø–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é/—Ç–µ–≥—É
- `limit` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (default: 50)
- `offset` - —Å–º–µ—â–µ–Ω–∏–µ –¥–ª—è –ø–∞–≥–∏–Ω–∞—Ü–∏–∏

**Response:**
```json
{
  "clans": [
    {
      "id": "alpha",
      "name": "–û—Ç—Ä—è–¥ –ê–ª—å—Ñ–∞",
      "tag": "ALPHA",
      "description": "...",
      "requirements": "100—á+, KD > 1.0",
      "members": 5,
      "maxMembers": 50,
      "level": 5,
      "bannerUrl": "...",
      "logoUrl": "...",
      "winrate": 68
    }
  ],
  "total": 3
}
```

#### `GET /api/clans/:id`
–ü–æ–ª—É—á–∏—Ç—å –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–ª–∞–Ω–µ

**Response:**
```json
{
  "clan": {
    "id": "alpha",
    "name": "–û—Ç—Ä—è–¥ –ê–ª—å—Ñ–∞",
    // ... clan info
  },
  "owner": {
    "id": "uuid",
    "username": "CommanderX"
  },
  "members": [
    {
      "id": "member-uuid",
      "playerId": "player-uuid",
      "username": "TacticalViper",
      "role": "–û—Ñ–∏—Ü–µ—Ä",
      "status": "online",
      "stats": { /* player stats */ }
    }
  ],
  "stats": {
    "totalMembers": 5,
    "onlineMembers": 3,
    "avgKD": 1.2,
    "winrate": 68
  }
}
```

#### `POST /api/clans`
–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –∫–ª–∞–Ω (Owner only)

**Request Body:**
```json
{
  "name": "–ù–æ–≤—ã–π –ö–ª–∞–Ω",
  "tag": "NEW",
  "description": "–û–ø–∏—Å–∞–Ω–∏–µ",
  "requirements": "50—á+",
  "bannerUrl": "https://...",
  "logoUrl": "https://...",
  "discordLink": "https://discord.gg/..."
}
```

**Response:**
```json
{
  "clan": { /* created clan */ }
}
```

#### `PATCH /api/clans/:id`
–û–±–Ω–æ–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–ª–∞–Ω–∞ (Owner only)

**Request Body:**
```json
{
  "description": "–ù–æ–≤–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ",
  "requirements": "100—á+",
  "bannerUrl": "https://...",
  "logoUrl": "https://...",
  "discordLink": "https://discord.gg/..."
}
```

#### `DELETE /api/clans/:id`
–£–¥–∞–ª–∏—Ç—å –∫–ª–∞–Ω (Owner only)

---

### üë• Clan Members API

#### `GET /api/clans/:clanId/members`
–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —á–ª–µ–Ω–æ–≤ –∫–ª–∞–Ω–∞

**Query Params:**
- `sortBy` - —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞: `kd`, `hours`, `winrate`, `kills`, `default`

**Response:**
```json
{
  "members": [
    {
      "id": "member-uuid",
      "playerId": "player-uuid",
      "username": "TacticalViper",
      "role": "–û—Ñ–∏—Ü–µ—Ä",
      "status": "online",
      "joinedAt": "2024-01-15T10:00:00Z",
      "stats": { /* player stats */ }
    }
  ]
}
```

#### `PATCH /api/clans/:clanId/members/:memberId`
–ò–∑–º–µ–Ω–∏—Ç—å —Ä–æ–ª—å —á–ª–µ–Ω–∞ –∫–ª–∞–Ω–∞ (Owner/Officers only)

**Request Body:**
```json
{
  "role": "–û—Ñ–∏—Ü–µ—Ä" | "–ë–æ–µ—Ü" | "–†–µ–∫—Ä—É—Ç"
}
```

#### `DELETE /api/clans/:clanId/members/:memberId`
–£–¥–∞–ª–∏—Ç—å —á–ª–µ–Ω–∞ –∏–∑ –∫–ª–∞–Ω–∞ (Owner/Officers only)

#### `POST /api/clans/:clanId/leave`
–ü–æ–∫–∏–Ω—É—Ç—å –∫–ª–∞–Ω

---

### üìù Clan Applications API

#### `GET /api/clans/:clanId/applications`
–ü–æ–ª—É—á–∏—Ç—å –∑–∞—è–≤–∫–∏ –≤ –∫–ª–∞–Ω (Owner only)

**Response:**
```json
{
  "applications": [
    {
      "id": "app-uuid",
      "player": {
        "id": "player-uuid",
        "username": "Rookie_One",
        "avatarUrl": "..."
      },
      "message": "–•–æ—á—É –≤ –∫—Ä—É—Ç–æ–π –∫–ª–∞–Ω!",
      "status": "pending",
      "createdAt": "2024-11-20T10:00:00Z",
      "stats": { /* player stats */ }
    }
  ]
}
```

#### `POST /api/clans/:clanId/apply`
–ü–æ–¥–∞—Ç—å –∑–∞—è–≤–∫—É –≤ –∫–ª–∞–Ω

**Request Body:**
```json
{
  "message": "–•–æ—á—É –≤—Å—Ç—É–ø–∏—Ç—å –≤ –∫–ª–∞–Ω –ø–æ—Ç–æ–º—É —á—Ç–æ..."
}
```

**Response:**
```json
{
  "application": { /* created application */ }
}
```

#### `POST /api/clans/:clanId/applications/:appId/accept`
–ü—Ä–∏–Ω—è—Ç—å –∑–∞—è–≤–∫—É (Owner only)

**Response:**
```json
{
  "member": { /* new clan member */ }
}
```

#### `POST /api/clans/:clanId/applications/:appId/reject`
–û—Ç–∫–ª–æ–Ω–∏—Ç—å –∑–∞—è–≤–∫—É (Owner only)

---

## üöÄ –ü–ª–∞–Ω –†–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –≠—Ç–∞–ø 1: Database Schema (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –í–´–°–û–ö–ò–ô)
- [ ] –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –¥–ª—è –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- [ ] –°–æ–∑–¥–∞—Ç—å Zod —Å—Ö–µ–º—ã –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- [ ] –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å TypeScript —Ç–∏–ø—ã

**–§–∞–π–ª—ã:**
- `shared/schema.ts` - –æ—Å–Ω–æ–≤–Ω—ã–µ —Å—Ö–µ–º—ã
- `drizzle/migrations/` - –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î

### –≠—Ç–∞–ø 2: Storage Interface (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –í–´–°–û–ö–ò–ô)
- [ ] –†–∞—Å—à–∏—Ä–∏—Ç—å `IStorage` –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Players
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Clans
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Applications
- [ ] –î–æ–±–∞–≤–∏—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

**–§–∞–π–ª—ã:**
- `server/storage.ts`

### –≠—Ç–∞–ø 3: API Routes (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –°–†–ï–î–ù–ò–ô)
- [ ] Players endpoints
- [ ] Clans endpoints
- [ ] Clan Members endpoints
- [ ] Applications endpoints
- [ ] Error handling middleware
- [ ] Request validation

**–§–∞–π–ª—ã:**
- `server/routes.ts`

### –≠—Ç–∞–ø 4: Frontend Integration (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –°–†–ï–î–ù–ò–ô)
- [ ] –°–æ–∑–¥–∞—Ç—å API –∫–ª–∏–µ–Ω—Ç (fetch wrapper)
- [ ] –ó–∞–º–µ–Ω–∏—Ç—å mock –¥–∞–Ω–Ω—ã–µ –Ω–∞ API calls
- [ ] –î–æ–±–∞–≤–∏—Ç—å TanStack Query –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ loading states

**–§–∞–π–ª—ã:**
- `client/src/lib/api.ts` - –Ω–æ–≤—ã–π —Ñ–∞–π–ª
- `client/src/pages/profile.jsx` - –æ–±–Ω–æ–≤–∏—Ç—å

### –≠—Ç–∞–ø 5: Testing & Demo Data (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –ù–ò–ó–ö–ò–ô)
- [ ] Seed —Å–∫—Ä–∏–ø—Ç –¥–ª—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API (Swagger/OpenAPI)

---

## üîó –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –û—Å–Ω–æ–≤–Ω–æ–π –ü—Ä–æ–µ–∫—Ç

### –ß—Ç–æ –ù—É–∂–Ω–æ –æ—Ç –û—Å–Ω–æ–≤–Ω–æ–≥–æ –ü—Ä–æ–µ–∫—Ç–∞

#### 1. –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
```typescript
// Middleware –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
app.use('/api', async (req, res, next) => {
  // –í–∞—à–∞ –ª–æ–≥–∏–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
  const userId = await getUserIdFromToken(req.headers.authorization);
  req.userId = userId; // –î–æ–±–∞–≤–∏—Ç—å userId –≤ request
  next();
});
```

#### 2. Steam API Integration (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```typescript
// –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Å Steam
async function syncPlayerStats(steamId: string) {
  // –õ–æ–≥–∏–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏–∑ Steam API
  // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ –±–∞–∑–µ —á–µ—Ä–µ–∑ storage.updatePlayerStats()
}
```

#### 3. Discord Integration (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```typescript
// Discord OAuth callback
app.get('/auth/discord/callback', async (req, res) => {
  const discordId = /* –ø–æ–ª—É—á–∏—Ç—å –∏–∑ Discord */;
  await storage.updatePlayer(userId, { discordId });
});
```

### –ö–∞–∫ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å API

#### –ü—Ä–∏–º–µ—Ä: –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
```typescript
// Frontend
const { data, isLoading } = useQuery({
  queryKey: ['profile'],
  queryFn: async () => {
    const res = await fetch('/api/players/me', {
      headers: {
        'Authorization': `Bearer ${token}`
      }
    });
    return res.json();
  }
});
```

#### –ü—Ä–∏–º–µ—Ä: –ü–æ–¥–∞—á–∞ –∑–∞—è–≤–∫–∏ –≤ –∫–ª–∞–Ω
```typescript
// Frontend
const applyMutation = useMutation({
  mutationFn: async ({ clanId, message }) => {
    const res = await fetch(`/api/clans/${clanId}/apply`, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'Authorization': `Bearer ${token}`
      },
      body: JSON.stringify({ message })
    });
    return res.json();
  },
  onSuccess: () => {
    queryClient.invalidateQueries(['applications']);
  }
});
```

### Environment Variables
```env
# Database
DATABASE_URL=postgresql://user:pass@host:5432/zaruba

# Optional
STEAM_API_KEY=your_steam_api_key
DISCORD_CLIENT_ID=your_discord_client_id
DISCORD_CLIENT_SECRET=your_discord_client_secret
```

---

## üìù –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ó–∞–º–µ—Ç–∫–∏

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- –í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Ç—Ä–µ–±—É—é—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (–∫—Ä–æ–º–µ public)
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ Zod
- Rate limiting –¥–ª—è API (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- SQL injection –∑–∞—â–∏—Ç–∞ —á–µ—Ä–µ–∑ Drizzle ORM

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –ò–Ω–¥–µ–∫—Å—ã –Ω–∞ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –ø–æ–ª—è—Ö
- –ü–∞–≥–∏–Ω–∞—Ü–∏—è –¥–ª—è —Å–ø–∏—Å–∫–æ–≤
- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ —á–µ—Ä–µ–∑ TanStack Query
- N+1 queries —Ä–µ—à–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ JOIN

### –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å Redis –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥–æ–±–∞–≤–∏—Ç—å WebSocket –¥–ª—è real-time
- –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (–ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏)

### –ë—É–¥—É—â–∏–µ –£–ª—É—á—à–µ–Ω–∏—è
- [ ] –°–∏—Å—Ç–µ–º–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
- [ ] –¢—É—Ä–Ω–∏—Ä—ã –∏ —Ä–µ–π—Ç–∏–Ω–≥–∏
- [ ] Clan Wars (–≤–æ–π–Ω—ã –∫–ª–∞–Ω–æ–≤)
- [ ] –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–∞—Ä—Ç–∞–º
- [ ] –ò—Å—Ç–æ—Ä–∏—è –º–∞—Ç—á–µ–π
- [ ] Clan chat —á–µ—Ä–µ–∑ WebSocket

---

## ‚úÖ Checklist –¥–ª—è –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å PostgreSQL –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å environment variables
- [ ] –î–æ–±–∞–≤–∏—Ç—å middleware –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ endpoints
- [ ] –û–±–Ω–æ–≤–∏—Ç—å frontend –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API
- [ ] –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å CORS –µ—Å–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ
- [ ] –ó–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è

---

**–ê–≤—Ç–æ—Ä:** Replit Agent  
**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 20 –Ω–æ—è–±—Ä—è 2024  
**–í–µ—Ä—Å–∏—è:** 1.0.0
